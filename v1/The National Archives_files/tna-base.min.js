($.customEventer = function (passedObject) {
  var elementIdOrClass = passedObject.elementIdOrClass,
    eventToWatch = passedObject.eventToWatch,
    customEventToTrigger = passedObject.customEventToTrigger;
  $(document).on(eventToWatch, elementIdOrClass, function () {
    $(document).trigger(customEventToTrigger);
  });
}),
  ($.toggleDisplayOfElement = function (toggler, togglee) {
    $(togglee).toggle(), $(toggler).toggleClass("expanded");
  });
var customizeTweetMedia = function () {
  jQuery(".entry-content")
    .find(".twitter-timeline")
    .contents()
    .find(".timeline-Tweet-text")
    .css("font-size", "1.148em", "line-height", "1.6em"),
    jQuery(".entry-content")
      .find(".twitter-timeline")
      .contents()
      .find(".timeline-Tweet-text")
      .css("line-height", "1.58em"),
    jQuery(".entry-content")
      .find(".twitter-timeline")
      .contents()
      .find("h1")
      .css("font-size", "1.45em");
};
jQuery(".entry-content").delegate(
  "#twitter-widget-0",
  "DOMSubtreeModified propertychange",
  function () {
    customizeTweetMedia();
  }
),
  ($.fn.mega_menu_enhancements = function () {
    return (
      $("#mega-menu-pull-down, #mega-menu-mobile").each(function () {
        var $this = $(this);
        $this.on("click", function () {
          $("#nav").slideToggle("fast"), $this.toggleClass("expanded");
        });
      }),
      $(document).on("click", ".toggle-sub-menu", function (e) {
        var $this;
        $(window).width() < 480 &&
          (($this = $(this)),
          e.preventDefault(),
          $this.toggleClass("expanded").next().slideToggle("fast"));
      }),
      $('.mega-menu a[href="#"]').each(function () {
        var $this = $(this),
          text = $this.text();
        $this.replaceWith(
          $("<div>", { text: text, class: "toggle-sub-menu", id: "more-link" })
        );
      }),
      this.each(function () {
        var $link,
          $this = $(this),
          $items = $this.next();
        $this.addClass("toggle-sub-menu"),
          ($link = $("<a>", {
            href: $this.attr("href"),
            text: $this.text() + " home",
          })),
          $('<li class="mobile-home-link">').append($link).prependTo($items);
      })
    );
  }),
  ($.fn.append_promotional_image = function () {
    return this.each(function () {
      $(this).append(
        '<li class="imgContent"><a href="https://www.nationalarchives.gov.uk/about/visit-us/whats-on/with-love/" title="With Love"><img src="//www.nationalarchives.gov.uk/images/home/menu-with-love.jpg" alt="With Love" class="img-responsive tna-img-responsive"></a></li>'
      );
    });
  }),
  (function ($) {
    $.fn.add_attributes_to_target_blank = function () {
      return this.each(function () {
        var $this = $(this);
        "_blank" === $this.attr("target") &&
          $this.attr("rel", "noopener noreferrer");
      });
    };
  })(jQuery),
  (tnaSetThisCookie = function (name, days) {
    var d = new Date();
    d.setTime(d.getTime() + 864e5 * days),
      (document.cookie =
        name + "=true;path=/;expires=" + d.toGMTString() + ";");
  }),
  (tnaCheckForThisCookie = function (name) {
    return -1 !== document.cookie.indexOf(name);
  }),
  $(document).ready(function () {
    $(function () {
      $("#mega-menu-pull-down").show(),
        tnaCheckForThisCookie("dontShowCookieNotice") ||
          ($("").css().appendTo("body"),
          setTimeout(function () {
            $(".cookieNotice").slideDown(1e3);
          }, 1e3));
    }),
  }),
  $(document).ready(function () {
    if ($(".image_caption_back").length)
      try {
        var $imageCaption = $(".image_caption_back"),
          ariaExpanded = $.parseJSON(
            $(".eye_caption").attr("aria-expanded").toLowerCase()
          ),
          ariaHidden = $.parseJSON(
            $imageCaption.attr("aria-hidden").toLowerCase()
          );
        $(".eye_caption").on("click", function () {
          $imageCaption.toggle(),
            (ariaHidden = !ariaHidden),
            (ariaExpanded = !ariaExpanded),
            $imageCaption.attr("aria-hidden", ariaHidden),
            $(this).attr("aria-expanded", ariaExpanded);
        });
      } catch (e) {
        return !1;
      }
  }),
  $(function () {
    $('a[class="anchor-link"]').on("click", function () {
      if (
        location.pathname.replace(/^\//, "") ==
          this.pathname.replace(/^\//, "") &&
        location.hostname == this.hostname
      ) {
        var target = $(this.hash);
        if (
          (target = target.length
            ? target
            : $("[name=" + this.hash.slice(1) + "]")).length
        )
          return (
            $("html, body").animate({ scrollTop: target.offset().top }, 500), !1
          );
      }
    });
  }),
  $('a[target="_blank"]').add_attributes_to_target_blank(),
  $("ul.sub-menu:last").append_promotional_image(),
  $(".mega-menu > ul > li > a").mega_menu_enhancements();
